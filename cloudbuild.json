{
  "steps": [{
    "name": "mirror.gcr.io/library/golang",
    "args": [ "go", "version" ]
  },
  {
    "name": "mirror.gcr.io/library/golang",
    "args": [ "go", "version" ],
    "dir": "fucntions/autodeploy"
  },
  {
    "name": "gcr.io/cloud-builders/gcloud",
    "args": [ 
      "functions", "deploy", "GetGameDataByDay",
      "--entry-point", "GetGameDataByDay",
      "--max-instances", "1",
      "--memory", "128MB",
      "--runtime", "go113",
      "--service-account", "firebase-adminsdk-t8pqz@warning-track-backend.iam.gserviceaccount.com",
      "--set-env-vars", "DATE_FMT=${_DATE_FMT},DB_COLLECTION=${_DB_COLLECTION},FN_NAME=${_FUNCTION_NAME},PROJECT_ID=$PROJECT_ID,VERSION=$COMMIT_SHA",
      "--source", "https://source.developers.google.com/projects/warning-track-backend/repos/github_unrealities_warning-track-backend/moveable-aliases/master/paths/game-data-by-day",
      "--timeout", "5s",
      "--allow-unauthenticated",
      "--trigger-http" ],
    "dir": "functions/autodeploy"
  }],
  "substitutions": {
    "_DATE_FMT": "01-02-2006",
    "_DB_COLLECTION": "game-data-by-day",
    "_FUNCTION_NAME": "GetGameDataByDay"
  }
}
