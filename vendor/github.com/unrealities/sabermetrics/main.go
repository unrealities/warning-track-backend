package sabermetrics

import (
	"errors"
	"log"
)

// ErrGameOver is returned if it has been determined the game is over
//   If a game is over, then there is no leverage index
var ErrGameOver = errors.New("leverage index is only for in progress games")

// ErrInvalidInning is returned if a non-positive HalfInning.Inning is received
var ErrInvalidInning = errors.New("inning should be a positive integer")

// ErrInvalidOuts is returned if outs is invalid
var ErrInvalidOuts = errors.New("outs should be a value of 0, 1, 2 or 3")

// ErrUnexpectedIndex is returned if you managed to slip one past my validations
var ErrUnexpectedIndex = errors.New("calculated an unexpected index that will not yield a valid leverage index")

// LeverageIndices is pulled from `The Book`: http://www.insidethebook.com/li.shtml
// These values are most likely older than 2008 and could use updating
//
// This a 24 x 154 matrix
// 24:  BaseState.Int() * (outs+1)
//      [{outs: 0, baseState{first: false, second: false, third: false}},
//       {outs: 0, baseState{first: true, second: false, third: false}},
//       {outs: 0, baseState{first: false, second: true, third: false}},
//       {outs: 0, baseState{first: false, second: false, third: true}},
//       {outs: 0, baseState{first: true, second: true, third: false}},
//       {outs: 0, baseState{first: true, second: false, third: true}},
//       {outs: 0, baseState{first: false, second: true, third: true}},
//       {outs: 0, baseState{first: true, second: true, third: true}},
//       ...
//       {outs: 2, baseState{first: true, second: true, third: true}}]
// 154: halfInning + run differential possibilities
//       run differential is in terms of the home team.
//         -4 = Home Team is losing by 4
//          0 = Tie Game
//          4 = Home Team is winning by 4
//       games with an absolute run differential greater than 4 are most likely not interesting and excluded from this table
//       there are 18 half innings, 16 have 9 run differential possibilities (-4...4)
//       while the top of the 1st and the bottom of the 9th can only have 5 different possibilities (-4...0)
//       [{{Inning: 1, TopOfInning: true}, runDiff: -4},
//        {{Inning: 1, TopOfInning: true}, runDiff: -3},
//        {{Inning: 1, TopOfInning: true}, runDiff: -2},
//        {{Inning: 1, TopOfInning: true}, runDiff: -1},
//        {{Inning: 1, TopOfInning: true}, runDiff: 0},
//        {{Inning: 1, TopOfInning: false}, runDiff: -4},
//        {{Inning: 1, TopOfInning: false}, runDiff: -3},
//        {{Inning: 1, TopOfInning: false}, runDiff: -2},
//        {{Inning: 1, TopOfInning: false}, runDiff: -1},
//        {{Inning: 1, TopOfInning: false}, runDiff: -0},
//        {{Inning: 1, TopOfInning: false}, runDiff: 1},
//        {{Inning: 1, TopOfInning: false}, runDiff: 2},
//        {{Inning: 1, TopOfInning: false}, runDiff: 3},
//        {{Inning: 1, TopOfInning: false}, runDiff: 4},
//        {{Inning: 2, TopOfInning: true}, runDiff: -4},
//        ...
//        {{Inning: 9, TopOfInning: true}, runDiff: 4},
//        {{Inning: 9, TopOfInning: false}, runDiff: -1},
//        {{Inning: 9, TopOfInning: false}, runDiff: -4},
//        {{Inning: 9, TopOfInning: false}, runDiff: -3},
//        {{Inning: 9, TopOfInning: false}, runDiff: -2},
//        {{Inning: 9, TopOfInning: false}, runDiff: -1},
//        {{Inning: 9, TopOfInning: false}, runDiff: -0}]
var LeverageIndices = [24][154]float32{
	{0.4, 0.6, 0.7, 0.8, 0.9, 0.7, 0.8, 0.9, 0.9, 0.9, 0.8, 0.6, 0.5, 0.4, 0.4, 0.6, 0.7, 0.8, 0.9, 1.0, 0.9, 0.8, 0.7, 0.8, 0.9, 1.0, 1.0, 0.9, 0.8, 0.6, 0.5, 0.4, 0.4, 0.6, 0.7, 0.9, 1.0, 1.0, 1.0, 0.9, 0.7, 0.8, 0.9, 1.0, 1.1, 1.0, 0.8, 0.6, 0.5, 0.3, 0.4, 0.5, 0.7, 0.9, 1.1, 1.1, 1.1, 0.9, 0.7, 0.8, 1.0, 1.1, 1.2, 1.1, 0.9, 0.6, 0.4, 0.3, 0.4, 0.5, 0.7, 1.0, 1.2, 1.3, 1.1, 0.9, 0.7, 0.8, 1.1, 1.3, 1.3, 1.2, 0.9, 0.6, 0.4, 0.3, 0.3, 0.5, 0.7, 1.0, 1.3, 1.4, 1.3, 1.0, 0.7, 0.8, 1.1, 1.4, 1.6, 1.3, 0.9, 0.6, 0.3, 0.2, 0.2, 0.4, 0.7, 1.0, 1.5, 1.7, 1.4, 1.0, 0.6, 0.8, 1.2, 1.6, 1.9, 1.5, 0.8, 0.4, 0.2, 0.1, 0.2, 0.3, 0.6, 1.0, 1.9, 2.2, 1.5, 0.9, 0.6, 0.7, 1.1, 1.8, 2.5, 1.8, 0.6, 0.3, 0.1, 0.1, 0.1, 0.2, 0.3, 0.7, 2.4, 2.9, 1.6, 0.8, 0.4, 0.5, 1.0, 2.0, 3.6, 2.3},
	{0.7, 0.9, 1.1, 1.3, 1.4, 1.2, 1.4, 1.5, 1.5, 1.4, 1.2, 1.0, 0.8, 0.6, 0.7, 0.9, 1.1, 1.3, 1.5, 1.5, 1.5, 1.4, 1.2, 1.3, 1.5, 1.6, 1.6, 1.5, 1.2, 1.0, 0.8, 0.6, 0.6, 0.9, 1.1, 1.4, 1.6, 1.7, 1.6, 1.4, 1.2, 1.3, 1.6, 1.7, 1.7, 1.5, 1.3, 1.0, 0.7, 0.5, 0.6, 0.8, 1.1, 1.4, 1.7, 1.8, 1.7, 1.5, 1.2, 1.4, 1.7, 1.9, 1.9, 1.7, 1.3, 1.0, 0.7, 0.5, 0.5, 0.8, 1.1, 1.5, 1.9, 2.0, 1.9, 1.6, 1.2, 1.4, 1.8, 2.1, 2.1, 1.8, 1.3, 0.9, 0.6, 0.4, 0.5, 0.7, 1.1, 1.6, 2.1, 2.3, 2.1, 1.7, 1.2, 1.4, 1.9, 2.3, 2.4, 2.0, 1.3, 0.8, 0.5, 0.3, 0.4, 0.6, 1.0, 1.6, 2.4, 2.7, 2.3, 1.7, 1.2, 1.4, 2.0, 2.6, 3.0, 2.3, 1.2, 0.7, 0.4, 0.2, 0.2, 0.4, 0.8, 1.5, 2.8, 3.4, 2.6, 1.7, 1.0, 1.3, 2.1, 3.1, 3.8, 2.6, 0.9, 0.4, 0.2, 0.1, 0.1, 0.2, 0.5, 1.1, 3.4, 4.6, 2.9, 1.6, 0.8, 1.0, 2.0, 3.6, 5.4, 3.1},
	{0.6, 0.7, 0.9, 1.0, 1.2, 1.1, 1.2, 1.3, 1.2, 1.1, 1.0, 0.8, 0.6, 0.5, 0.5, 0.7, 0.9, 1.1, 1.2, 1.3, 1.3, 1.2, 1.0, 1.1, 1.3, 1.3, 1.3, 1.2, 1.0, 0.8, 0.6, 0.4, 0.5, 0.7, 0.9, 1.1, 1.3, 1.4, 1.4, 1.2, 1.0, 1.2, 1.3, 1.5, 1.4, 1.3, 1.1, 0.8, 0.6, 0.4, 0.5, 0.7, 0.9, 1.2, 1.4, 1.5, 1.5, 1.3, 1.1, 1.2, 1.4, 1.6, 1.6, 1.4, 1.1, 0.8, 0.5, 0.4, 0.4, 0.6, 0.9, 1.2, 1.5, 1.7, 1.6, 1.4, 1.1, 1.2, 1.6, 1.8, 1.8, 1.5, 1.1, 0.7, 0.5, 0.3, 0.4, 0.6, 0.9, 1.3, 1.7, 1.9, 1.8, 1.5, 1.1, 1.3, 1.7, 2.0, 2.0, 1.6, 1.1, 0.7, 0.4, 0.2, 0.3, 0.5, 0.8, 1.2, 1.9, 2.3, 2.0, 1.5, 1.1, 1.3, 1.8, 2.3, 2.4, 1.8, 0.9, 0.5, 0.3, 0.1, 0.2, 0.4, 0.6, 1.1, 2.2, 2.8, 2.3, 1.6, 1.0, 1.2, 1.9, 2.7, 3.1, 2.0, 0.7, 0.3, 0.1, 0.1, 0.1, 0.2, 0.4, 0.8, 2.6, 3.7, 2.7, 1.5, 0.8, 1.0, 1.9, 3.3, 4.3, 2.5},
	{0.5, 0.6, 0.8, 0.9, 1.0, 1.0, 1.1, 1.1, 1.1, 1.0, 0.8, 0.7, 0.5, 0.4, 0.4, 0.6, 0.8, 0.9, 1.1, 1.1, 1.2, 1.1, 0.9, 1.0, 1.2, 1.2, 1.2, 1.0, 0.9, 0.7, 0.5, 0.4, 0.4, 0.6, 0.8, 1.0, 1.1, 1.2, 1.2, 1.1, 1.0, 1.1, 1.2, 1.3, 1.2, 1.1, 0.9, 0.7, 0.5, 0.3, 0.4, 0.6, 0.8, 1.0, 1.2, 1.3, 1.3, 1.2, 1.0, 1.1, 1.3, 1.4, 1.4, 1.1, 0.9, 0.6, 0.4, 0.3, 0.3, 0.5, 0.7, 1.0, 1.3, 1.5, 1.5, 1.3, 1.1, 1.2, 1.5, 1.6, 1.5, 1.2, 0.9, 0.6, 0.4, 0.2, 0.3, 0.5, 0.7, 1.0, 1.4, 1.7, 1.7, 1.4, 1.1, 1.2, 1.6, 1.8, 1.7, 1.3, 0.8, 0.5, 0.3, 0.2, 0.2, 0.4, 0.6, 1.0, 1.5, 2.0, 1.9, 1.5, 1.1, 1.3, 1.8, 2.2, 2.0, 1.5, 0.8, 0.4, 0.2, 0.1, 0.2, 0.3, 0.5, 0.9, 1.8, 2.4, 2.3, 1.6, 1.0, 1.2, 1.9, 2.7, 2.5, 1.7, 0.6, 0.3, 0.1, 0.1, 0.1, 0.2, 0.3, 0.7, 2.3, 3.1, 2.9, 1.6, 0.8, 1.1, 2.0, 3.6, 3.5, 2.1},
	{0.8, 1.1, 1.3, 1.6, 1.8, 1.7, 1.9, 2.0, 1.9, 1.7, 1.5, 1.2, 0.9, 0.7, 0.8, 1.1, 1.4, 1.6, 1.9, 2.0, 2.0, 1.9, 1.7, 1.8, 2.0, 2.1, 2.0, 1.8, 1.5, 1.2, 0.9, 0.7, 0.8, 1.0, 1.4, 1.7, 2.0, 2.2, 2.1, 2.0, 1.7, 1.9, 2.1, 2.3, 2.2, 1.9, 1.6, 1.2, 0.9, 0.6, 0.7, 1.0, 1.4, 1.8, 2.1, 2.3, 2.3, 2.1, 1.8, 2.0, 2.3, 2.5, 2.4, 2.0, 1.6, 1.1, 0.8, 0.5, 0.6, 0.9, 1.3, 1.8, 2.3, 2.6, 2.5, 2.3, 1.8, 2.1, 2.5, 2.7, 2.6, 2.2, 1.6, 1.1, 0.7, 0.4, 0.5, 0.8, 1.3, 1.8, 2.5, 2.9, 2.8, 2.4, 1.9, 2.2, 2.7, 3.1, 3.0, 2.3, 1.5, 0.9, 0.6, 0.3, 0.4, 0.7, 1.1, 1.8, 2.7, 3.4, 3.2, 2.6, 1.9, 2.2, 3.0, 3.6, 3.5, 2.5, 1.3, 0.8, 0.4, 0.2, 0.3, 0.5, 0.9, 1.6, 3.1, 4.1, 3.7, 2.8, 1.8, 2.2, 3.3, 4.2, 4.4, 2.8, 0.9, 0.4, 0.2, 0.1, 0.1, 0.3, 0.6, 1.2, 3.6, 5.3, 4.4, 2.9, 1.6, 2.0, 3.6, 5.2, 6.0, 3.2},
	{0.6, 0.8, 1.1, 1.3, 1.5, 1.6, 1.7, 1.7, 1.6, 1.4, 1.2, 1.0, 0.7, 0.5, 0.6, 0.8, 1.1, 1.3, 1.6, 1.7, 1.8, 1.7, 1.5, 1.6, 1.8, 1.8, 1.7, 1.5, 1.2, 0.9, 0.7, 0.5, 0.6, 0.8, 1.1, 1.4, 1.6, 1.8, 1.9, 1.8, 1.6, 1.7, 1.9, 2.0, 1.8, 1.5, 1.2, 0.9, 0.7, 0.4, 0.5, 0.8, 1.0, 1.4, 1.7, 2.0, 2.1, 1.9, 1.7, 1.8, 2.1, 2.1, 2.0, 1.6, 1.2, 0.9, 0.6, 0.4, 0.5, 0.7, 1.0, 1.4, 1.8, 2.2, 2.3, 2.1, 1.7, 1.9, 2.3, 2.4, 2.2, 1.7, 1.2, 0.8, 0.5, 0.3, 0.4, 0.6, 0.9, 1.4, 1.9, 2.4, 2.6, 2.3, 1.8, 2.0, 2.5, 2.7, 2.4, 1.7, 1.1, 0.7, 0.4, 0.2, 0.3, 0.5, 0.8, 1.3, 2.0, 2.8, 3.0, 2.5, 1.8, 2.1, 2.8, 3.3, 2.8, 1.7, 0.9, 0.5, 0.3, 0.1, 0.2, 0.3, 0.6, 1.1, 2.1, 3.3, 3.6, 2.8, 1.8, 2.2, 3.2, 4.1, 3.3, 1.8, 0.6, 0.3, 0.1, 0.1, 0.1, 0.2, 0.4, 0.8, 2.3, 4.2, 4.6, 3.0, 1.7, 2.1, 3.7, 5.5, 4.3, 2.1},
	{0.6, 0.8, 1.0, 1.2, 1.3, 1.4, 1.5, 1.5, 1.4, 1.3, 1.1, 0.9, 0.7, 0.5, 0.6, 0.8, 1.0, 1.2, 1.4, 1.5, 1.6, 1.5, 1.4, 1.5, 1.6, 1.6, 1.5, 1.3, 1.1, 0.9, 0.7, 0.5, 0.5, 0.8, 1.0, 1.2, 1.5, 1.6, 1.7, 1.6, 1.4, 1.6, 1.7, 1.8, 1.6, 1.4, 1.1, 0.9, 0.6, 0.4, 0.5, 0.7, 1.0, 1.3, 1.6, 1.8, 1.8, 1.7, 1.5, 1.7, 1.9, 1.9, 1.8, 1.5, 1.1, 0.8, 0.6, 0.4, 0.4, 0.7, 1.0, 1.3, 1.7, 1.9, 2.0, 1.9, 1.6, 1.8, 2.1, 2.1, 2.0, 1.6, 1.1, 0.8, 0.5, 0.3, 0.4, 0.6, 0.9, 1.3, 1.8, 2.2, 2.3, 2.1, 1.7, 1.9, 2.3, 2.4, 2.2, 1.7, 1.1, 0.7, 0.4, 0.2, 0.3, 0.5, 0.8, 1.3, 2.0, 2.5, 2.6, 2.3, 1.7, 2.0, 2.6, 2.9, 2.6, 1.7, 0.9, 0.5, 0.3, 0.1, 0.2, 0.3, 0.6, 1.1, 2.1, 3.1, 3.2, 2.6, 1.7, 2.1, 3.0, 3.6, 3.3, 1.8, 0.6, 0.3, 0.1, 0.1, 0.1, 0.2, 0.4, 0.8, 2.4, 4.0, 4.0, 2.9, 1.6, 2.0, 3.5, 4.7, 4.3, 2.0},
	{0.8, 1.1, 1.4, 1.7, 2.0, 2.2, 2.3, 2.3, 2.1, 1.9, 1.6, 1.2, 0.9, 0.7, 0.8, 1.1, 1.4, 1.7, 2.0, 2.3, 2.4, 2.3, 2.1, 2.3, 2.4, 2.4, 2.2, 1.9, 1.6, 1.2, 0.9, 0.6, 0.7, 1.0, 1.4, 1.8, 2.1, 2.4, 2.6, 2.5, 2.3, 2.4, 2.6, 2.6, 2.4, 2.0, 1.6, 1.2, 0.8, 0.6, 0.7, 1.0, 1.4, 1.8, 2.2, 2.6, 2.8, 2.7, 2.4, 2.6, 2.8, 2.8, 2.6, 2.1, 1.6, 1.1, 0.8, 0.5, 0.6, 0.9, 1.3, 1.8, 2.4, 2.8, 3.0, 2.9, 2.5, 2.8, 3.1, 3.1, 2.8, 2.2, 1.5, 1.0, 0.7, 0.4, 0.5, 0.8, 1.2, 1.8, 2.5, 3.1, 3.4, 3.2, 2.7, 3.0, 3.5, 3.6, 3.1, 2.2, 1.4, 0.9, 0.5, 0.3, 0.4, 0.6, 1.1, 1.7, 2.6, 3.5, 3.9, 3.6, 2.8, 3.3, 4.0, 4.1, 3.5, 2.3, 1.2, 0.7, 0.4, 0.2, 0.2, 0.4, 0.8, 1.5, 2.8, 4.1, 4.6, 4.0, 3.0, 3.5, 4.6, 5.0, 4.2, 2.2, 0.8, 0.4, 0.2, 0.1, 0.1, 0.2, 0.5, 1.0, 2.9, 5.2, 5.7, 4.6, 3.1, 3.7, 5.4, 6.4, 5.3, 2.4},
	{0.3, 0.4, 0.5, 0.6, 0.6, 0.5, 0.6, 0.6, 0.7, 0.6, 0.6, 0.5, 0.4, 0.3, 0.3, 0.4, 0.5, 0.6, 0.7, 0.7, 0.6, 0.6, 0.5, 0.5, 0.6, 0.7, 0.7, 0.7, 0.6, 0.5, 0.4, 0.3, 0.3, 0.4, 0.5, 0.6, 0.7, 0.7, 0.7, 0.6, 0.5, 0.5, 0.7, 0.7, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.3, 0.4, 0.5, 0.7, 0.8, 0.8, 0.7, 0.6, 0.5, 0.5, 0.7, 0.8, 0.9, 0.8, 0.6, 0.5, 0.3, 0.2, 0.3, 0.4, 0.6, 0.7, 0.9, 0.9, 0.8, 0.6, 0.5, 0.5, 0.7, 0.9, 1.0, 0.9, 0.7, 0.5, 0.3, 0.2, 0.2, 0.4, 0.5, 0.8, 1.0, 1.1, 0.9, 0.7, 0.4, 0.5, 0.8, 1.0, 1.2, 1.0, 0.7, 0.4, 0.3, 0.2, 0.2, 0.3, 0.5, 0.8, 1.2, 1.3, 1.0, 0.6, 0.4, 0.5, 0.8, 1.1, 1.4, 1.2, 0.6, 0.3, 0.2, 0.1, 0.1, 0.2, 0.4, 0.7, 1.4, 1.6, 1.0, 0.6, 0.3, 0.4, 0.7, 1.2, 1.9, 1.4, 0.5, 0.2, 0.1, 0.0, 0.1, 0.1, 0.3, 0.6, 1.9, 2.2, 1.0, 0.5, 0.2, 0.2, 0.6, 1.3, 2.8, 1.9},
	{0.6, 0.7, 0.9, 1.0, 1.1, 1.0, 1.1, 1.2, 1.2, 1.1, 1.0, 0.8, 0.7, 0.5, 0.6, 0.7, 0.9, 1.1, 1.2, 1.3, 1.2, 1.1, 0.9, 1.0, 1.2, 1.3, 1.3, 1.2, 1.0, 0.8, 0.6, 0.5, 0.5, 0.7, 1.0, 1.2, 1.3, 1.4, 1.3, 1.1, 0.9, 1.0, 1.2, 1.4, 1.4, 1.3, 1.1, 0.8, 0.6, 0.4, 0.5, 0.7, 1.0, 1.2, 1.4, 1.5, 1.4, 1.2, 0.9, 1.0, 1.3, 1.5, 1.6, 1.4, 1.1, 0.8, 0.6, 0.4, 0.5, 0.7, 1.0, 1.3, 1.6, 1.7, 1.5, 1.2, 0.9, 1.1, 1.4, 1.7, 1.8, 1.5, 1.2, 0.8, 0.5, 0.3, 0.4, 0.6, 0.9, 1.3, 1.8, 1.9, 1.7, 1.3, 0.9, 1.0, 1.5, 1.9, 2.1, 1.7, 1.1, 0.7, 0.4, 0.3, 0.3, 0.5, 0.9, 1.4, 2.0, 2.3, 1.8, 1.3, 0.8, 1.0, 1.5, 2.1, 2.5, 2.0, 1.1, 0.6, 0.3, 0.2, 0.2, 0.4, 0.7, 1.3, 2.4, 2.9, 2.0, 1.2, 0.7, 0.8, 1.5, 2.4, 3.4, 2.4, 0.8, 0.4, 0.2, 0.1, 0.1, 0.2, 0.5, 1.0, 3.1, 3.9, 2.2, 1.0, 0.4, 0.6, 1.3, 2.8, 4.8, 3.0},
	{0.6, 0.8, 0.9, 1.1, 1.2, 1.0, 1.1, 1.2, 1.2, 1.2, 1.0, 0.9, 0.7, 0.5, 0.6, 0.8, 1.0, 1.1, 1.2, 1.3, 1.2, 1.1, 0.9, 1.0, 1.2, 1.3, 1.3, 1.2, 1.1, 0.9, 0.7, 0.5, 0.6, 0.8, 1.0, 1.2, 1.3, 1.4, 1.3, 1.1, 0.9, 1.0, 1.3, 1.4, 1.4, 1.3, 1.1, 0.9, 0.6, 0.5, 0.5, 0.7, 1.0, 1.2, 1.5, 1.5, 1.4, 1.2, 0.9, 1.1, 1.3, 1.5, 1.6, 1.4, 1.2, 0.9, 0.6, 0.4, 0.5, 0.7, 1.0, 1.3, 1.6, 1.7, 1.5, 1.2, 0.9, 1.1, 1.4, 1.7, 1.8, 1.6, 1.2, 0.8, 0.5, 0.3, 0.4, 0.6, 1.0, 1.4, 1.8, 2.0, 1.7, 1.3, 0.9, 1.1, 1.5, 1.9, 2.1, 1.8, 1.2, 0.8, 0.5, 0.3, 0.3, 0.6, 0.9, 1.4, 2.1, 2.3, 1.8, 1.3, 0.8, 1.0, 1.5, 2.1, 2.6, 2.1, 1.1, 0.6, 0.3, 0.2, 0.2, 0.4, 0.8, 1.3, 2.5, 2.9, 2.0, 1.2, 0.7, 0.8, 1.5, 2.4, 3.4, 2.5, 0.8, 0.4, 0.2, 0.1, 0.1, 0.2, 0.5, 1.0, 3.3, 4.0, 2.2, 1.0, 0.5, 0.6, 1.3, 2.7, 5.0, 3.2},
	{0.7, 0.9, 1.0, 1.2, 1.3, 1.0, 1.1, 1.3, 1.3, 1.3, 1.1, 1.0, 0.8, 0.6, 0.7, 0.9, 1.1, 1.2, 1.3, 1.3, 1.3, 1.1, 0.9, 1.0, 1.2, 1.3, 1.4, 1.4, 1.2, 1.0, 0.8, 0.6, 0.6, 0.9, 1.1, 1.3, 1.5, 1.5, 1.3, 1.1, 0.9, 1.0, 1.3, 1.4, 1.5, 1.5, 1.3, 1.0, 0.7, 0.5, 0.6, 0.9, 1.1, 1.4, 1.6, 1.6, 1.4, 1.2, 0.9, 1.0, 1.3, 1.6, 1.7, 1.6, 1.3, 1.0, 0.7, 0.5, 0.6, 0.8, 1.1, 1.5, 1.8, 1.8, 1.5, 1.2, 0.9, 1.0, 1.4, 1.7, 2.0, 1.8, 1.4, 1.0, 0.6, 0.4, 0.5, 0.8, 1.1, 1.6, 2.0, 2.1, 1.6, 1.3, 0.9, 1.0, 1.4, 1.9, 2.3, 2.1, 1.4, 0.9, 0.5, 0.3, 0.4, 0.7, 1.1, 1.6, 2.4, 2.5, 1.8, 1.3, 0.8, 1.0, 1.5, 2.1, 2.9, 2.5, 1.3, 0.7, 0.4, 0.2, 0.3, 0.5, 0.9, 1.6, 3.1, 3.2, 2.0, 1.3, 0.7, 0.9, 1.5, 2.4, 3.9, 3.2, 1.0, 0.5, 0.2, 0.1, 0.1, 0.3, 0.6, 1.2, 4.3, 4.4, 2.3, 1.1, 0.5, 0.6, 1.4, 2.9, 5.8, 4.5},
	{0.9, 1.2, 1.5, 1.7, 1.9, 1.7, 1.9, 2.0, 2.0, 1.8, 1.6, 1.3, 1.0, 0.8, 0.9, 1.2, 1.5, 1.8, 2.0, 2.1, 2.0, 1.8, 1.6, 1.7, 2.0, 2.1, 2.1, 2.0, 1.7, 1.3, 1.0, 0.7, 0.9, 1.2, 1.5, 1.8, 2.1, 2.2, 2.1, 1.9, 1.6, 1.8, 2.1, 2.3, 2.3, 2.1, 1.7, 1.3, 1.0, 0.7, 0.8, 1.1, 1.5, 1.9, 2.3, 2.4, 2.3, 2.0, 1.6, 1.8, 2.2, 2.5, 2.5, 2.2, 1.8, 1.3, 0.9, 0.6, 0.7, 1.1, 1.5, 2.0, 2.5, 2.7, 2.5, 2.1, 1.6, 1.9, 2.4, 2.8, 2.8, 2.4, 1.8, 1.2, 0.8, 0.5, 0.6, 1.0, 1.5, 2.1, 2.8, 3.1, 2.8, 2.2, 1.6, 1.9, 2.6, 3.1, 3.3, 2.7, 1.8, 1.1, 0.7, 0.4, 0.5, 0.8, 1.3, 2.1, 3.2, 3.6, 3.1, 2.3, 1.6, 1.9, 2.7, 3.6, 4.0, 3.0, 1.6, 0.9, 0.5, 0.3, 0.3, 0.6, 1.1, 2.0, 3.7, 4.5, 3.5, 2.4, 1.4, 1.7, 2.9, 4.1, 5.1, 3.5, 1.1, 0.5, 0.3, 0.1, 0.1, 0.3, 0.7, 1.4, 4.6, 6.1, 4.0, 2.3, 1.1, 1.3, 2.9, 4.8, 7.2, 4.3},
	{0.9, 1.1, 1.3, 1.6, 1.7, 1.5, 1.7, 1.8, 1.8, 1.7, 1.5, 1.2, 1.0, 0.8, 0.9, 1.1, 1.4, 1.6, 1.8, 1.8, 1.8, 1.6, 1.4, 1.5, 1.8, 1.9, 1.9, 1.8, 1.6, 1.3, 1.0, 0.7, 0.8, 1.1, 1.4, 1.7, 1.9, 2.0, 1.9, 1.7, 1.5, 1.6, 1.9, 2.0, 2.1, 1.9, 1.6, 1.3, 0.9, 0.7, 0.8, 1.1, 1.4, 1.8, 2.1, 2.2, 2.1, 1.8, 1.5, 1.7, 2.0, 2.2, 2.3, 2.1, 1.7, 1.3, 0.9, 0.6, 0.7, 1.0, 1.4, 1.9, 2.3, 2.4, 2.3, 1.9, 1.5, 1.7, 2.2, 2.5, 2.6, 2.3, 1.7, 1.2, 0.8, 0.5, 0.6, 0.9, 1.4, 2.0, 2.6, 2.8, 2.5, 2.1, 1.5, 1.8, 2.4, 2.8, 3.0, 2.6, 1.7, 1.1, 0.7, 0.4, 0.5, 0.8, 1.3, 2.0, 3.1, 3.3, 2.9, 2.2, 1.5, 1.8, 2.6, 3.2, 3.7, 3.1, 1.6, 0.9, 0.5, 0.3, 0.3, 0.6, 1.1, 2.0, 3.8, 4.2, 3.3, 2.3, 1.4, 1.7, 2.7, 3.9, 4.9, 3.8, 1.2, 0.6, 0.3, 0.1, 0.1, 0.3, 0.7, 1.5, 5.0, 5.7, 4.0, 2.3, 1.1, 1.4, 2.9, 4.9, 7.1, 5.0},
	{0.7, 0.9, 1.1, 1.3, 1.4, 1.4, 1.5, 1.6, 1.5, 1.4, 1.2, 1.0, 0.8, 0.6, 0.7, 0.9, 1.1, 1.3, 1.5, 1.6, 1.6, 1.5, 1.3, 1.4, 1.6, 1.7, 1.6, 1.5, 1.3, 1.0, 0.8, 0.6, 0.7, 0.9, 1.2, 1.4, 1.6, 1.7, 1.7, 1.6, 1.3, 1.5, 1.7, 1.8, 1.7, 1.6, 1.3, 1.0, 0.8, 0.5, 0.6, 0.9, 1.2, 1.5, 1.7, 1.9, 1.9, 1.7, 1.4, 1.6, 1.8, 2.0, 1.9, 1.7, 1.4, 1.0, 0.7, 0.5, 0.6, 0.8, 1.2, 1.5, 1.9, 2.1, 2.1, 1.8, 1.4, 1.6, 2.0, 2.2, 2.1, 1.9, 1.4, 1.0, 0.6, 0.4, 0.5, 0.8, 1.1, 1.6, 2.1, 2.3, 2.3, 1.9, 1.5, 1.7, 2.2, 2.5, 2.5, 2.1, 1.4, 0.9, 0.5, 0.3, 0.4, 0.7, 1.1, 1.6, 2.5, 2.8, 2.7, 2.1, 1.4, 1.7, 2.4, 3.0, 3.0, 2.5, 1.3, 0.7, 0.4, 0.2, 0.3, 0.5, 0.9, 1.6, 3.0, 3.4, 3.2, 2.2, 1.3, 1.6, 2.6, 3.7, 4.0, 3.0, 0.9, 0.4, 0.2, 0.1, 0.1, 0.3, 0.6, 1.2, 3.9, 4.6, 3.9, 2.3, 1.1, 1.4, 2.8, 4.8, 5.7, 4.0},
	{1.1, 1.5, 1.8, 2.1, 2.4, 2.4, 2.6, 2.6, 2.6, 2.3, 2.0, 1.6, 1.3, 1.0, 1.1, 1.5, 1.8, 2.2, 2.5, 2.7, 2.7, 2.6, 2.3, 2.5, 2.7, 2.8, 2.7, 2.4, 2.1, 1.7, 1.3, 0.9, 1.1, 1.4, 1.9, 2.3, 2.7, 2.9, 2.9, 2.7, 2.4, 2.6, 2.9, 3.1, 2.9, 2.6, 2.1, 1.6, 1.2, 0.8, 1.0, 1.4, 1.9, 2.4, 2.9, 3.1, 3.2, 2.9, 2.4, 2.7, 3.2, 3.3, 3.2, 2.8, 2.2, 1.6, 1.1, 0.7, 0.9, 1.3, 1.9, 2.5, 3.1, 3.5, 3.5, 3.1, 2.5, 2.9, 3.4, 3.7, 3.5, 3.0, 2.2, 1.5, 1.0, 0.6, 0.8, 1.2, 1.8, 2.6, 3.4, 3.9, 3.9, 3.3, 2.6, 3.0, 3.8, 4.2, 4.0, 3.3, 2.2, 1.4, 0.8, 0.5, 0.6, 1.0, 1.6, 2.6, 3.9, 4.5, 4.4, 3.6, 2.6, 3.1, 4.2, 4.9, 4.8, 3.7, 2.0, 1.1, 0.6, 0.3, 0.4, 0.7, 1.4, 2.4, 4.6, 5.6, 5.2, 3.9, 2.6, 3.1, 4.6, 5.9, 6.2, 4.4, 1.4, 0.7, 0.3, 0.1, 0.2, 0.4, 0.8, 1.8, 5.7, 7.3, 6.2, 4.2, 2.4, 3.0, 5.1, 7.3, 8.6, 5.4},
	{0.2, 0.3, 0.3, 0.4, 0.4, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.3, 0.3, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.3, 0.3, 0.3, 0.4, 0.4, 0.5, 0.4, 0.4, 0.3, 0.2, 0.2, 0.2, 0.3, 0.4, 0.4, 0.5, 0.5, 0.4, 0.4, 0.3, 0.3, 0.4, 0.5, 0.5, 0.5, 0.4, 0.3, 0.2, 0.2, 0.2, 0.3, 0.4, 0.5, 0.5, 0.5, 0.5, 0.4, 0.3, 0.3, 0.4, 0.5, 0.6, 0.5, 0.4, 0.3, 0.2, 0.2, 0.2, 0.3, 0.4, 0.5, 0.6, 0.6, 0.5, 0.4, 0.3, 0.3, 0.4, 0.6, 0.6, 0.6, 0.4, 0.3, 0.2, 0.1, 0.2, 0.3, 0.4, 0.5, 0.7, 0.7, 0.5, 0.4, 0.2, 0.3, 0.4, 0.6, 0.8, 0.7, 0.5, 0.3, 0.2, 0.1, 0.1, 0.2, 0.4, 0.5, 0.8, 0.8, 0.6, 0.3, 0.2, 0.2, 0.4, 0.7, 1.0, 0.8, 0.4, 0.2, 0.1, 0.1, 0.1, 0.2, 0.3, 0.5, 1.0, 1.1, 0.6, 0.3, 0.1, 0.2, 0.4, 0.7, 1.3, 1.1, 0.3, 0.2, 0.1, 0.0, 0.0, 0.1, 0.2, 0.4, 1.4, 1.5, 0.5, 0.2, 0.1, 0.1, 0.2, 0.6, 1.9, 1.5},
	{0.4, 0.5, 0.6, 0.7, 0.8, 0.6, 0.7, 0.8, 0.8, 0.8, 0.7, 0.6, 0.5, 0.4, 0.4, 0.5, 0.7, 0.8, 0.8, 0.9, 0.8, 0.7, 0.6, 0.6, 0.8, 0.9, 0.9, 0.8, 0.7, 0.6, 0.5, 0.3, 0.4, 0.5, 0.7, 0.8, 0.9, 0.9, 0.8, 0.7, 0.6, 0.6, 0.8, 0.9, 1.0, 0.9, 0.8, 0.6, 0.5, 0.3, 0.4, 0.5, 0.7, 0.9, 1.0, 1.0, 0.9, 0.7, 0.6, 0.7, 0.8, 1.0, 1.1, 1.0, 0.8, 0.6, 0.4, 0.3, 0.3, 0.5, 0.7, 0.9, 1.1, 1.1, 1.0, 0.8, 0.6, 0.6, 0.9, 1.1, 1.2, 1.1, 0.8, 0.6, 0.4, 0.2, 0.3, 0.5, 0.7, 1.0, 1.3, 1.3, 1.1, 0.8, 0.5, 0.6, 0.9, 1.2, 1.5, 1.3, 0.8, 0.5, 0.3, 0.2, 0.2, 0.4, 0.6, 1.0, 1.5, 1.6, 1.2, 0.7, 0.4, 0.5, 0.9, 1.4, 1.8, 1.5, 0.8, 0.4, 0.2, 0.1, 0.2, 0.3, 0.5, 1.0, 1.8, 2.1, 1.3, 0.7, 0.3, 0.4, 0.8, 1.6, 2.5, 1.8, 0.6, 0.3, 0.1, 0.1, 0.1, 0.2, 0.3, 0.7, 2.4, 2.9, 1.3, 0.4, 0.1, 0.2, 0.5, 1.7, 3.7, 2.4},
	{0.6, 0.7, 0.9, 1.0, 1.1, 0.8, 1.0, 1.1, 1.1, 1.1, 1.0, 0.8, 0.7, 0.5, 0.6, 0.8, 0.9, 1.1, 1.2, 1.2, 1.1, 0.9, 0.8, 0.8, 1.0, 1.2, 1.2, 1.2, 1.0, 0.9, 0.7, 0.5, 0.6, 0.8, 1.0, 1.1, 1.3, 1.3, 1.1, 1.0, 0.8, 0.9, 1.1, 1.3, 1.3, 1.3, 1.1, 0.9, 0.6, 0.5, 0.5, 0.7, 1.0, 1.2, 1.4, 1.4, 1.2, 1.0, 0.7, 0.9, 1.1, 1.4, 1.5, 1.4, 1.1, 0.9, 0.6, 0.4, 0.5, 0.7, 1.0, 1.3, 1.6, 1.6, 1.3, 1.0, 0.7, 0.8, 1.2, 1.5, 1.7, 1.6, 1.2, 0.8, 0.6, 0.4, 0.4, 0.7, 1.0, 1.4, 1.8, 1.8, 1.4, 1.0, 0.7, 0.8, 1.2, 1.6, 2.0, 1.8, 1.2, 0.8, 0.5, 0.3, 0.3, 0.6, 0.9, 1.4, 2.1, 2.2, 1.5, 0.9, 0.6, 0.7, 1.1, 1.8, 2.6, 2.2, 1.1, 0.7, 0.4, 0.2, 0.2, 0.4, 0.8, 1.4, 2.7, 2.8, 1.5, 0.8, 0.4, 0.5, 1.0, 1.9, 3.5, 2.8, 0.9, 0.4, 0.2, 0.1, 0.1, 0.2, 0.5, 1.1, 3.7, 4.0, 1.4, 0.5, 0.2, 0.2, 0.6, 1.8, 5.2, 3.9},
	{0.7, 0.9, 1.0, 1.2, 1.3, 1.0, 1.1, 1.3, 1.3, 1.3, 1.2, 1.0, 0.8, 0.6, 0.7, 0.9, 1.1, 1.3, 1.4, 1.4, 1.2, 1.1, 0.9, 1.0, 1.2, 1.3, 1.4, 1.4, 1.2, 1.0, 0.8, 0.6, 0.7, 0.9, 1.1, 1.3, 1.5, 1.5, 1.3, 1.1, 0.9, 1.0, 1.2, 1.4, 1.6, 1.5, 1.3, 1.0, 0.8, 0.5, 0.6, 0.9, 1.2, 1.4, 1.6, 1.6, 1.4, 1.1, 0.8, 1.0, 1.3, 1.6, 1.7, 1.6, 1.3, 1.0, 0.7, 0.5, 0.6, 0.8, 1.2, 1.5, 1.8, 1.8, 1.5, 1.1, 0.8, 0.9, 1.3, 1.7, 2.0, 1.9, 1.4, 1.0, 0.7, 0.4, 0.5, 0.8, 1.2, 1.6, 2.1, 2.1, 1.6, 1.1, 0.7, 0.9, 1.3, 1.9, 2.4, 2.2, 1.4, 0.9, 0.6, 0.3, 0.4, 0.7, 1.1, 1.7, 2.5, 2.5, 1.7, 1.1, 0.6, 0.8, 1.3, 2.0, 3.0, 2.6, 1.4, 0.8, 0.4, 0.2, 0.3, 0.5, 0.9, 1.6, 3.2, 3.3, 1.7, 0.9, 0.4, 0.5, 1.1, 2.1, 4.1, 3.4, 1.0, 0.5, 0.2, 0.1, 0.1, 0.3, 0.6, 1.3, 4.4, 4.6, 1.4, 0.5, 0.2, 0.2, 0.7, 1.8, 6.1, 4.7},
	{0.8, 1.0, 1.3, 1.5, 1.6, 1.3, 1.5, 1.6, 1.7, 1.6, 1.4, 1.2, 0.9, 0.7, 0.8, 1.0, 1.3, 1.5, 1.7, 1.7, 1.6, 1.4, 1.2, 1.3, 1.6, 1.8, 1.8, 1.7, 1.5, 1.2, 0.9, 0.7, 0.8, 1.0, 1.3, 1.6, 1.8, 1.9, 1.8, 1.5, 1.2, 1.4, 1.7, 1.9, 2.0, 1.8, 1.5, 1.2, 0.9, 0.6, 0.7, 1.0, 1.4, 1.7, 2.0, 2.1, 1.9, 1.6, 1.2, 1.4, 1.8, 2.1, 2.2, 2.0, 1.6, 1.2, 0.8, 0.6, 0.7, 1.0, 1.4, 1.8, 2.2, 2.3, 2.1, 1.6, 1.2, 1.4, 1.9, 2.3, 2.5, 2.2, 1.6, 1.1, 0.8, 0.5, 0.6, 0.9, 1.3, 1.9, 2.5, 2.6, 2.3, 1.7, 1.1, 1.4, 2.0, 2.6, 2.9, 2.5, 1.6, 1.0, 0.6, 0.4, 0.4, 0.8, 1.2, 1.9, 2.9, 3.2, 2.5, 1.7, 1.0, 1.2, 2.0, 2.9, 3.6, 2.9, 1.5, 0.8, 0.5, 0.2, 0.3, 0.6, 1.0, 1.8, 3.5, 4.0, 2.7, 1.6, 0.8, 1.0, 2.0, 3.3, 4.7, 3.5, 1.1, 0.5, 0.2, 0.1, 0.1, 0.3, 0.7, 1.4, 4.5, 5.5, 2.9, 1.3, 0.4, 0.6, 1.7, 3.7, 6.8, 4.4},
	{0.9, 1.1, 1.4, 1.6, 1.7, 1.4, 1.6, 1.7, 1.8, 1.7, 1.5, 1.3, 1.0, 0.8, 0.9, 1.1, 1.4, 1.6, 1.8, 1.8, 1.7, 1.5, 1.3, 1.4, 1.7, 1.9, 1.9, 1.8, 1.6, 1.3, 1.0, 0.7, 0.8, 1.1, 1.4, 1.7, 1.9, 2.0, 1.9, 1.6, 1.3, 1.4, 1.8, 2.0, 2.1, 1.9, 1.6, 1.3, 1.0, 0.7, 0.8, 1.1, 1.5, 1.8, 2.1, 2.2, 2.0, 1.7, 1.3, 1.5, 1.9, 2.2, 2.3, 2.1, 1.7, 1.3, 0.9, 0.6, 0.7, 1.1, 1.5, 1.9, 2.4, 2.5, 2.2, 1.7, 1.3, 1.5, 2.0, 2.4, 2.6, 2.4, 1.8, 1.2, 0.8, 0.5, 0.6, 1.0, 1.4, 2.0, 2.7, 2.8, 2.4, 1.8, 1.2, 1.4, 2.1, 2.7, 3.1, 2.7, 1.8, 1.1, 0.7, 0.4, 0.5, 0.8, 1.4, 2.1, 3.1, 3.4, 2.6, 1.7, 1.1, 1.3, 2.1, 3.0, 3.8, 3.1, 1.6, 0.9, 0.5, 0.3, 0.3, 0.6, 1.1, 2.0, 3.8, 4.3, 2.8, 1.6, 0.8, 1.0, 2.0, 3.4, 5.1, 3.8, 1.2, 0.6, 0.3, 0.1, 0.2, 0.3, 0.7, 1.5, 5.0, 5.9, 2.9, 1.3, 0.4, 0.6, 1.7, 3.7, 7.4, 5.0},
	{1.0, 1.2, 1.5, 1.7, 1.9, 1.6, 1.8, 2.0, 2.0, 1.9, 1.7, 1.4, 1.1, 0.8, 1.0, 1.2, 1.5, 1.8, 2.0, 2.1, 2.0, 1.7, 1.4, 1.6, 1.9, 2.1, 2.1, 2.0, 1.7, 1.4, 1.1, 0.8, 0.9, 1.2, 1.6, 1.9, 2.2, 2.2, 2.1, 1.8, 1.5, 1.6, 2.0, 2.3, 2.3, 2.2, 1.8, 1.4, 1.0, 0.7, 0.9, 1.2, 1.6, 2.0, 2.4, 2.5, 2.3, 1.9, 1.5, 1.7, 2.1, 2.5, 2.6, 2.3, 1.9, 1.4, 1.0, 0.7, 0.8, 1.1, 1.6, 2.1, 2.6, 2.8, 2.5, 2.0, 1.4, 1.7, 2.3, 2.8, 3.0, 2.6, 1.9, 1.3, 0.9, 0.6, 0.7, 1.0, 1.6, 2.2, 2.9, 3.2, 2.7, 2.0, 1.4, 1.6, 2.4, 3.1, 3.5, 2.9, 1.9, 1.2, 0.7, 0.4, 0.5, 0.9, 1.5, 2.3, 3.4, 3.9, 3.1, 2.0, 1.2, 1.5, 2.4, 3.6, 4.3, 3.3, 1.7, 1.0, 0.5, 0.3, 0.3, 0.7, 1.2, 2.1, 4.0, 4.9, 3.5, 1.9, 1.0, 1.2, 2.3, 4.2, 5.8, 3.9, 1.3, 0.6, 0.3, 0.1, 0.2, 0.3, 0.7, 1.6, 5.1, 6.9, 3.9, 1.4, 0.5, 0.7, 1.8, 5.1, 8.4, 4.7},
	{1.4, 1.8, 2.1, 2.5, 2.7, 2.4, 2.7, 2.9, 2.9, 2.7, 2.4, 2.0, 1.5, 1.2, 1.3, 1.7, 2.2, 2.6, 2.9, 3.0, 2.9, 2.6, 2.2, 2.5, 2.8, 3.1, 3.1, 2.9, 2.5, 2.0, 1.5, 1.1, 1.3, 1.7, 2.2, 2.7, 3.1, 3.3, 3.1, 2.7, 2.3, 2.5, 3.0, 3.3, 3.4, 3.1, 2.5, 2.0, 1.5, 1.0, 1.2, 1.7, 2.3, 2.9, 3.4, 3.6, 3.4, 2.9, 2.3, 2.6, 3.2, 3.6, 3.7, 3.3, 2.6, 1.9, 1.4, 0.9, 1.1, 1.6, 2.2, 3.0, 3.7, 4.0, 3.7, 3.0, 2.3, 2.7, 3.4, 4.0, 4.2, 3.6, 2.7, 1.8, 1.2, 0.8, 0.9, 1.4, 2.2, 3.1, 4.1, 4.5, 4.1, 3.2, 2.3, 2.7, 3.7, 4.5, 4.9, 4.0, 2.6, 1.7, 1.0, 0.6, 0.7, 1.2, 2.0, 3.1, 4.7, 5.4, 4.5, 3.3, 2.1, 2.6, 3.9, 5.2, 5.9, 4.5, 2.4, 1.3, 0.7, 0.4, 0.5, 0.9, 1.6, 2.9, 5.6, 6.8, 5.1, 3.3, 1.9, 2.3, 4.0, 6.1, 7.7, 5.3, 1.7, 0.8, 0.4, 0.2, 0.2, 0.5, 1.0, 2.1, 6.9, 9.1, 5.7, 3.1, 1.4, 1.8, 3.9, 7.0, 10.9, 6.4},
}

// LeverageIndex (LI)
// Created by Tom Tango, Leverage Index measures the importance of a particular event by quantifying
// the extent to which win probability could change on said event, with 1.0 representing a neutral situation.
//
// bs :         BaseState{First: bool, Second: bool, Third: bool} representating which bases are occupied
// score :      Score{Away: int, Home: int}
// halfInning:  HalfInning{Inning: int, TopOfInning: bool} If inning > 9, then the leverage index of 9 is returned
// outs :       `int` representation of number of outs in the game currently (0,1,2,3).
//                3 acts as 0 outs for the next half inning.
//
// Returns:   `float64` representing the current game's leverage index
//            `error` occurs on invalid data
func LeverageIndex(baseState BaseState, score Score, halfInning HalfInning, outs int) (float32, error) {
	// validate
	if halfInning.Inning < 1 {
		return 0.0, ErrInvalidInning
	}
	if (outs < 0) || (outs > 3) {
		return 0.0, ErrInvalidOuts
	}
	if halfInning.Inning >= 9 && score.Home > score.Away && (!halfInning.TopOfInning || outs == 3) {
		return 0.0, ErrGameOver
	}

	// clean
	if outs == 3 {
		outs = 0
		if halfInning.TopOfInning {
			halfInning.TopOfInning = false
		} else {
			halfInning.Inning++
			halfInning.TopOfInning = true
		}
	}
	if halfInning.Inning > 9 {
		halfInning.Inning = 9
	}
	runDiff := score.Home - score.Away
	if runDiff > 4 {
		runDiff = 4
	}
	if runDiff < -4 {
		runDiff = -4
	}

	// convert to simple lookup table
	baseStateIndex := 8*outs + baseState.Int()
	gameStateIndex := 9*halfInning.Int() + runDiff // most half innings have nine possible run differentials

	if halfInning.Int() == 0 { // Top of the first the home team can only be losing or tied
		gameStateIndex = runDiff + 4
	}
	if halfInning.Int() == 1 { // Bottom of the first only increments five
		gameStateIndex = runDiff + 9
	}
	if halfInning.Int() == 17 { // Bottom of the ninth the home team can only be losing or tied
		gameStateIndex = runDiff + 153
	}

	// prevent panic
	if baseStateIndex > 24 || baseStateIndex < 0 || gameStateIndex > 153 || gameStateIndex < 0 {
		log.Printf("bs: %d, gs: %d", baseStateIndex, gameStateIndex)
		return 0.0, ErrUnexpectedIndex
	}

	return LeverageIndices[baseStateIndex][gameStateIndex], nil
}
